<!DOCTYPE html>
<html>

<head>
  <title>Taco Recipes</title>
  <link rel="stylesheet" type="text/css" href="/styles/main.css">
</head>

<body>
  <h1>el Tacero ğŸŒ®</h1>

  <form action="/recipe" method="POST" class="buttons"> <!-- Step 4: Update the form to send the correct values -->
    <button type="submit" value="chicken" name="choice">ğŸ—</button>  <!--key is choice and value is chicken-->>
    <button type="submit" value="beef" name="choice">ğŸ¥©</button>
    <button type="submit" value="fish" name="choice">ğŸŸ</button>
  </form>
  <div id="recipeContainer" class = "scroll">

    <!-- If no recipe yet, show: -->
      <% if (!data || Object.keys(data).length === 0) { %>
    <h2>Pick your favourite tacos Gringo ğŸŒ®</h2>
      <% } else { %>
      <!-- Else, show the recipe name e.g. <h2>Recipe name</h2> and Ingredients -->
        <h2><%= data.name %></h2>
        <h3>Ingredients:</h3>
      <!--
        <ul>
        <% Object.entries(data.ingredients).forEach(([key, ingredient]) => { %>
          <li><strong><%= key %>:</strong> <%= ingredient.name %></li>
        <% }); %>
        </ul>
      -->
   
      <!-- Step 5: Display the recipe details if available -->
          <% if (data && data.name) { %>
          <div class="recipe-details">
           
            <p class="price">Price: $<%= data.price %></p>
            
            <div class="ingredients">
              <!-- Protein -->
              <div class="ingredient-section">
                <h4>ğŸ¥© Protein:</h4>
                <p><%= data.ingredients.protein.name %> (<%= data.ingredients.protein.preparation %>)</p>
              </div>
              
              <!-- Salsa -->
              <div class="ingredient-section">
                <h4>ğŸŒ¶ï¸ Salsa:</h4>
                <p><%= data.ingredients.salsa.name %> - <em><%= data.ingredients.salsa.spiciness %></em></p>
              </div>
              
              <!-- Toppings -->
              <div class="ingredient-section">
                <h4>ğŸ¥¬ Toppings:</h4>
                <% data.ingredients.toppings.forEach((topping) => { %>
                  <div class="topping">
                    <h5><%= topping.name %> (<%= topping.quantity %>)</h5>
                    <ul class="ingredient-list">
                      <% topping.ingredients.forEach((ingredient) => { %>
                        <li><%= ingredient %></li>
                      <% }); %>
                    </ul>
                  </div>
                <% }); %>
              </div>
            </div>
          </div>
        <% } else { %>
          <h2>Pick your favourite taco el GuapoğŸ‘†</h2>
        <% } %>
          <% }; %>
  </div>         
</body>

</html>