<!DOCTYPE html>
<head>
 <%- include("partials/head.ejs") %>
   
</head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<%- include("partials/header.ejs") %>
<html>
    <body class="body">
       <main>   
        <p>
            <h1>Celestial Bodies </h1>
            <% if (locals.searchTerm) { %>
            <h1> Enter another Object's name here: </h1>
            <% }  else { %>
            <h1>  Enter a Celestial Object's name here: </h1>
            <% } %>
    
            <div class="container">
        
                <form method="POST" action="/astro-submit">
                    <label for="term">Name:</label>
                    <input type="text" id="term" name="term" required>
                    <label for="match_type">Search fuzzy or exact?</label>
                    <select id="match_type" name="match_type">
                        <option value="fuzzy">fuzzy</option>
                        <option value="exact">exact</option>
                    </select>
                    <input type="submit" value="Submit" style="background-color: #4CAF50;">
                </form>
            </div>
        </p>
        <p class="card">
            <% if (locals.searchTerm) { %>
                <h2> Search Results for <%= searchTerm %> (<%= totalResults %> Objects found):</h2> 
                <% } %>
                <% if (error) { %>
                    <div class="error">
                        <strong>Error:</strong> <%= error %>
                    </div>
                <% } else if (objects && objects.length > 0) { %>
                    <div class="results">
                        
                        <% objects.forEach((object, index) => { %>
                            <div class="object-item">
                                <div class="object-number"><%= index + 1 %>.</div>
                                <div class="object-details">
                                    <strong>Name:</strong> <%= object.name || 'Unknown' %>
                                    <% if (object.Type) { %>
                                        <br><strong>Type of Object:</strong> <%= object.Type %>
                                    <% } %>
                                    <% if (object.Sub_Type) { %>
                                        <br><strong>SubType:</strong> <%= object.Sub_Type %>
                                    <% } %>
                                    <% if (object.Right_Ascension) { %>
                                        <br><strong>Right Ascension:</strong> <%= object.Right_Ascension %>
                                    <% } %>
                                    <% if (object.Declination) { %>
                                        <br><strong>Declination:</strong> <%= object.Declination%>
                                    <% } %>
                                    
                                </div>
                            </div>
                        <% }) %>
                    </div>
            <% } else if (locals.searchTerm) { %>
                    <div class="no-results">
                        No objects found for "<%= searchTerm %>". Try a different search term.
                    </div>
            <% } %>
        </p>
       </main>
    </body>
<%- include("partials/footer.ejs") %>
</html>